{% extends 'base.html' %}

{% block content %}

  <div class="block-xs-middle pb-5">
    <div class="container">
      <div class="row">
        <div class="col-sm-10 col-lg-6">
          {% if request.user.is_authenticated %}
          <div class="row">
            <div class="col-md-12">
              <h1 style="border-bottom: none;">Dashboard</h1>
            </div>
          </div>
            {% if user.profile.dashboard_items %}
              {% for dashboard in user.profile.dashboard_items %}  <!-- https://stackoverflow.com/a/4524851/185820 -->
                  {% with "dashboard_"|add:dashboard|add:".html" as dashboard_html %}
                    {% include dashboard_html %}
                  {% endwith %}
              {% endfor %}
            {% else %}
              <p>Please <a href="{% url 'user_edit' user.pk %}">edit your profile</a> to add items to the dashboard.</p>
            {% endif %}
          {% else %}
          <div class="row">
            <div class="col-3 mx-auto my-5">
              <h1 class="block-titleData frequency">Staff</h1>
              <p class="lead mb-4 text-muted">Please sign in to continue</p>

              <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
                <a class="btn btn-primary btn-lg" href="/db/login/google-oauth2/?next=/db/">Sign in with Google</a>

                <div class="btn-group" role="group">
                  <button id="btnGroupDrop1" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  </button>
                  <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
                    <a class="dropdown-item" href="{% url 'login'  %}"><i class="fas fa-sign-in-alt"></i> Sign in</a>
                    <a class="dropdown-item" href="{% url 'password_reset' %}"><i class="fas fa-sign-in-alt"></i> Password reset</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

{% endblock %}
